<Window x:Class="LibraryManagement.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:LibraryManagement.ViewModels"
        Title="Đăng nhập - Quản lý thư viện" 
        Height="600" 
        Width="500"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize">
    
    <Window.DataContext>
        <vm:LoginViewModel/>
    </Window.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2196F3" Padding="20">
            <StackPanel>
                <TextBlock
                    Text="QUẢN LÝ TÀI LIỆU CỦA LỮ ĐOÀN 215" 
                          FontSize="24" 
                          FontWeight="Bold" 
                          Foreground="White"
                          HorizontalAlignment="Center"/>
                <TextBlock Text="Vui lòng đăng nhập để tiếp tục" 
                          FontSize="14" 
                          Foreground="White"
                          HorizontalAlignment="Center"
                          Margin="0,10,0,0"/>
            </StackPanel>
        </Border>

        <!-- Login Form -->
        <Border Grid.Row="1" 
                Background="White" 
                Padding="60"
                CornerRadius="10"
                Effect="{StaticResource CardShadow}">
            <StackPanel VerticalAlignment="Center">
                <!-- Username -->
                <TextBlock Text="Tên đăng nhập" 
                          FontSize="14" 
                          FontWeight="SemiBold"
                          Margin="0,0,0,5"/>
                <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                        FontSize="14"
                        Padding="10"
                        Height="40"
                        Margin="0,0,0,20">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Setter Property="BorderBrush" Value="#DDD"/>
                            <Setter Property="BorderThickness" Value="1"/>
                            <Style.Triggers>
                                <Trigger Property="IsFocused" Value="True">
                                    <Setter Property="BorderBrush" Value="#2196F3"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TextBox.Style>
                </TextBox>

                <!-- Password -->
                <TextBlock Text="Mật khẩu" 
                          FontSize="14" 
                          FontWeight="SemiBold"
                          Margin="0,0,0,5"/>
                <PasswordBox x:Name="PasswordBox"
                            FontSize="14"
                            Padding="10"
                            Height="40"
                            Margin="0,0,0,10"
                            PasswordChanged="PasswordBox_PasswordChanged">
                    <PasswordBox.Style>
                        <Style TargetType="PasswordBox">
                            <Setter Property="BorderBrush" Value="#DDD"/>
                            <Setter Property="BorderThickness" Value="1"/>
                            <Style.Triggers>
                                <Trigger Property="IsFocused" Value="True">
                                    <Setter Property="BorderBrush" Value="#2196F3"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </PasswordBox.Style>
                </PasswordBox>

                <!-- Error Message -->
                <TextBlock Text="{Binding ErrorMessage}" 
                          Foreground="Red"
                          FontSize="12"
                          Margin="0,0,0,15"
                          TextWrapping="Wrap"
                          Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"/>

                <!-- Buttons -->
                <Grid
                    Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition
                            Width="*" />
                        <ColumnDefinition
                            Width="10" />
                        <ColumnDefinition
                            Width="*" />
                    </Grid.ColumnDefinitions>

                    <Button
                        Grid.Column="0"
                        Content="Đăng nhập"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Height="45"
                        Background="#2196F3"
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        Command="{Binding LoginCommand}"
                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}">
                        <Button.Style>
                            <Style
                                TargetType="Button">
                                <Setter
                                    Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate
                                            TargetType="Button">
                                            <Border
                                                Background="{TemplateBinding Background}"
                                                CornerRadius="5"
                                                Padding="10">
                                                <ContentPresenter
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger
                                        Property="IsMouseOver"
                                        Value="True">
                                        <Setter
                                            Property="Background"
                                            Value="#1976D2" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <Button
                        Grid.Column="2"
                        Content="Thoát"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Height="45"
                        Background="#F5F5F5"
                        Foreground="#666"
                        BorderBrush="#DDD"
                        BorderThickness="1"
                        Cursor="Hand"
                        Command="{Binding CancelCommand}"
                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}">
                        <Button.Style>
                            <Style
                                TargetType="Button">
                                <Setter
                                    Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate
                                            TargetType="Button">
                                            <Border
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="5"
                                                Padding="10">
                                                <ContentPresenter
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center" />
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger
                                        Property="IsMouseOver"
                                        Value="True">
                                        <Setter
                                            Property="Background"
                                            Value="#E0E0E0" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </StackPanel>
        </Border>
    </Grid>
</Window>
